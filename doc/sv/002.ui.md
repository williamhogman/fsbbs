Klientsidan
============

*fsbbs* använder HTML5 och CSS3 för att ge användaren en mer
 desktop-liknande applikation i nyare webbläsare. Navigation mellan
 sidor, inloggning och registrering sker helt utan att hela sidan
 måste laddas om. När ett inlägg skrivs så ser användaren hur
 resultatet av hans markdown kod kommer att se ut när den är
 postad. Applikationen använder HTML5 History API:et där det finns
 stöd för detta.

Det är vanligt att AJAX applikationer inte stödjer användare som
av säkerhetskäl valt att stänga av JavaScript. Detta är dock inte
fallet med *fsbbs*, användaren förlorar vissa funktioner (såsom
Live-preview och AJAX navigering) men han kan göra samma saker som
användare med JavaScript påslaget kan.

Plugins
-------

Det är viktigt att bygga en applikation som bygger helt på öppna
standarder, därför har jag valt att inte använda Flash eller Java
(Notera att Java inte är helt öppen mjukvara) någonstans i
applikationen.

JavaScript
----------

Min javascript kod har endast två dependencies, prototype.js och
pagedown. prototype.js är ett populärt JavaScript bibliotek som lägger
till ett mer traditionellt objektorienterat till JavaScript samt
förenklar interaktionen med DOM igenom att lägga till användbara
methoder. Prototype.js finns inte med i källkoden till detta projekt
utan laddas ned från CDNJS (http://www.cdnjs.com) av klienten. CDNJS
är ett Content Delivery Network för javascript filer och bygger på
principen att om alla använder samma URL för sina JavaScript bibliotek
så kan den URLen cachas istället för att man för varje sida behöver
ladda ned koden. 

Pagedown är ett bibliotek för att rendera och editera
markdown copyright situationen för Pagedown är annorlunda då
författaren inte går att få tag på. Pagedown används och hålls vid liv
som ett OpenSource projekt av StackOverflow.com som använder det för
sina editerings funktioner.

Varje gång en användare klickar på en länk så försöker klienten att
hitta en **data-id** attribut på det klickade elementet om detta inte
hittas så letar skriptet vidare på detta elementets förälder och
kontrollerar samma sak framtills att den antingen hittar en
**data-id** attribut eller kommer till toppen av dokumentet. Ifall
inget id kan hittas så följs browserns default betende. Om ID hittas
så inleds en XHR till /api/get_thing.json med ID som en parameter. När
requesten har fullföljts så skickas det returnerade JSON-datat till
parseThing som konverterar datum till ett bättre format och
konverterar markdown till HTML. Efter detta har gjorts så renderas en
HTML template för datat och denna ersätter innehållet i #things. Efter
att innehållet renderats så uppdateras också forumläret efter vilken
sorts data som renderades.

